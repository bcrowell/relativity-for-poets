\pdfminorversion=4 % force pdf 1.4 output; http://tex.stackexchange.com/questions/95973/is-pdftex-1-40-13-outputting-malformed-pdfs

\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{poets}

\LoadClass[11pt]{book}
% Note that 11 pt does work with pdflatex, even though 11 pt is not one of the sizes
% of CM. I don't know whether it scales up 10 pt or scales down 12 pt, but anyway, it
% works.
%====================== packages =====================================================
\RequirePackage{amsmath}
\def\maketag@@@#1{\hbox{\m@th#1}} % workaround for bug in amsmath; see http://tex.stackexchange.com/a/155719/6853
\RequirePackage{url,makeidx,float,varioref,shaddap,surtitle,lipsum,ifthen}
\usepackage[pass,paperwidth=5.625in,paperheight=8.75in]{geometry}
  % This appears to be the only way of setting paperwidth and paperheight that works in all implementations of latex.
  % http://tex.stackexchange.com/questions/31973/latex-how-do-i-force-pdf-page-height-width
  % But I'm not really using geometry package, just calculating geometry using my compute_layout.rb script.

\RequirePackage{graphicx}
\DeclareGraphicsExtensions{.png,.jpg} % never .pdf, which causes endless hassles with lulu

\newcommand{\chapdir}{glub}

% layout

% The following were generated by compute_layout.rb and are to be cut and pasted into poets.cls:
  \setlength{\paperwidth}{5.625in}
  \setlength{\paperheight}{8.75in}
  \setlength{\hoffset}{-0.375in}
  \setlength{\oddsidemargin}{0.25in}
  \setlength{\evensidemargin}{0.0in}
  \setlength{\textwidth}{4.25in}
  \setlength{\voffset}{-0.375in}
  \setlength{\topmargin}{0.0in}
  \setlength{\headheight}{0.11in}
  \setlength{\headsep}{0.22in}
  \setlength{\textheight}{6.75in}

% figures

\newcommand{\fignakedfullpage}[1]{\includegraphics{\chapdir/figs/#1}}
\newcommand{\fig}[2][]{%
  \begin{figure}[#1]\label{fig:#2}
  \fignakedfullpage{#2}
  \end{figure}
}


% math

\newcommand{\zu}[1]{\textup{#1}}

%

\newenvironment{important}[1][]%
        {%
          \setlength{\saveleftskip}{\leftskip}%
          \addtolength{\leftskip}{10mm}%
          \noindent\ifthenelse{\equal{#1}{}}{}{\textbf{#1}\\*}%
        }{%
          \par  \setlength{\leftskip}{\saveleftskip} \par%
        } 
